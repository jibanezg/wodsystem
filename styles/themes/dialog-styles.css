/**
 * ==============================================
 * DIALOG/MODAL UNIFIED STYLING
 * Applies the same look and feel established in character sheets
 * to all dialogs, modals, and popup windows
 * ==============================================
 */

/* ====================
   BASE DIALOG STYLING
   ==================== */

.wod.dialog .window-content,
.wod.dialog.effect-manager .window-content,
.wod.dialog.roll-dialog .window-content,
.wod.dialog.Technocrat .window-content,
.wod.dialog.Mortal .window-content {
    background: #f8f8f8 !important;
    padding: 12px !important;
}

.wod.dialog form,
.wod.dialog.effect-manager form,
.wod.dialog.roll-dialog form,
form.wod-effect-manager,
form.wod-roll-dialog {
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
}

/* ====================
   CARD-STYLE SECTIONS
   ==================== */

form.wod-effect-manager > div,
form.wod-roll-dialog > div.pool-summary,
form.wod-roll-dialog > div.roll-config,
form.wod-roll-dialog > div.active-effects-section,
form.wod-roll-dialog > div.modifiers-section,
form.wod-roll-dialog > div.saved-rolls,
.wod.roll-dialog > div,
.wod.roll-dialog.Technocrat > div {
    background: #ffffff !important;
    border-radius: 6px !important;
    padding: 0 !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    border: none !important;
    margin-bottom: 12px !important;
    overflow: hidden !important;
}

/* Dialog buttons section - no card style */
form.wod-effect-manager > div.dialog-buttons,
form.wod-roll-dialog > div.dialog-buttons {
    background: transparent !important;
    box-shadow: none !important;
    padding: 0 !important;
}

/* ====================
   HELPER TEXT & LABELS
   ==================== */

/* Help text inline in labels (e.g., "(Optional)") */
.wod.dialog span.help-text,
.wod.dialog.effect-manager span.help-text,
form.wod-effect-manager span.help-text,
form.wod-roll-dialog span.help-text,
label span.help-text {
    font-size: 0.75em !important;
    color: #999 !important;
    font-weight: 400 !important;
    font-style: italic !important;
    margin-left: 4px !important;
}

/* Help text as paragraph (below inputs) */
.wod.dialog p.help-text,
.wod.dialog.effect-manager p.help-text,
form.wod-effect-manager p.help-text,
form.wod-roll-dialog p.help-text,
p.help-text {
    font-size: 0.75em !important;
    color: #777 !important;
    font-style: italic !important;
    margin: 4px 0 0 0 !important;
    padding: 4px 8px !important;
    background: rgba(0, 0, 0, 0.02) !important;
    border-left: 3px solid rgba(70, 130, 180, 0.3) !important;
    border-radius: 3px !important;
    line-height: 1.4 !important;
}

/* Small helper text (below checkboxes, selects, etc.) */
.wod.dialog small,
.wod.dialog.effect-manager small,
form.wod-effect-manager small,
form.wod-roll-dialog small,
.wod.dialog .form-group small {
    display: block !important;
    font-size: 0.75em !important;
    color: #888 !important;
    font-style: italic !important;
    margin-top: 4px !important;
    padding-left: 4px !important;
    line-height: 1.3 !important;
}

/* Modifiers help (centered, special) */
form.wod-effect-manager .modifiers-help,
.wod.dialog.effect-manager .modifiers-help {
    text-align: center !important;
    margin-bottom: 8px !important;
    padding: 8px 12px !important;
    background: rgba(255, 193, 7, 0.08) !important;
    border-left: 3px solid #ffc107 !important;
    border-radius: 4px !important;
}

form.wod-effect-manager .modifiers-help small,
.wod.dialog.effect-manager .modifiers-help small {
    color: #666 !important;
    font-weight: 500 !important;
    font-style: normal !important;
}

/* ====================
   SECTION HEADERS (Gradient, full-width within card)
   ==================== */

form.wod-effect-manager h3,
form.wod-roll-dialog h3,
form.wod-roll-dialog h4,
.wod.roll-dialog h3,
.wod.roll-dialog h4,
.wod.roll-dialog.Technocrat h3,
.wod.roll-dialog.Technocrat h4,
.wod.roll-dialog.Mortal h3,
.wod.roll-dialog.Mortal h4 {
    background: linear-gradient(135deg, var(--wod-primary, #4682B4) 0%, var(--wod-primary-dark, #2F4F6F) 100%) !important;
    color: white !important;
    padding: 10px 15px !important;
    border-radius: 6px 6px 0 0 !important;
    text-align: left !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-size: 0.75em !important;
    margin: 0 !important;
    box-shadow: none !important;
    border: none !important;
}

form.wod-effect-manager h3 i,
form.wod-roll-dialog h3 i,
form.wod-roll-dialog h4 i {
    margin-right: 6px !important;
}

/* ====================
   SECTION CONTENT PADDING
   ==================== */

form.wod-effect-manager .effect-header-section > *:not(h3),
form.wod-effect-manager .effect-metadata-section > *:not(h3),
form.wod-effect-manager .effect-conditions-section > *:not(h3),
form.wod-effect-manager .effect-modifiers > *:not(h3) {
    margin-left: 15px !important;
    margin-right: 15px !important;
}

form.wod-effect-manager .effect-header-section > div:first-of-type,
form.wod-effect-manager .effect-metadata-section > div:first-of-type,
form.wod-effect-manager .effect-conditions-section > div:first-of-type {
    margin-top: 15px !important;
}

form.wod-effect-manager .effect-header-section > div:last-of-type,
form.wod-effect-manager .effect-metadata-section > div:last-of-type,
form.wod-effect-manager .effect-conditions-section > div:last-of-type {
    margin-bottom: 15px !important;
}

form.wod-effect-manager .effect-modifiers {
    padding: 0 15px 15px 15px !important;
}

form.wod-effect-manager .effect-modifiers > h3 {
    margin-left: -15px !important;
    margin-right: -15px !important;
    margin-bottom: 12px !important;
}

form.wod-roll-dialog .pool-summary,
form.wod-roll-dialog .roll-config,
form.wod-roll-dialog .active-effects-section,
form.wod-roll-dialog .modifiers-section {
    padding: 15px !important;
}

form.wod-roll-dialog .pool-summary > h3,
form.wod-roll-dialog .roll-config > h3,
form.wod-roll-dialog .active-effects-section > h4,
form.wod-roll-dialog .modifiers-section > h4 {
    margin: -15px -15px 12px -15px !important;
}

/* ====================
   FORM GROUPS
   ==================== */

.wod.dialog .form-group,
form.wod-effect-manager .form-group,
form.wod-roll-dialog .form-group,
.wod.roll-dialog .form-group,
.wod.roll-dialog.Technocrat .form-group {
    margin-bottom: 12px !important;
}

.wod.dialog .form-group:last-child,
form.wod-effect-manager .form-group:last-child,
form.wod-roll-dialog .form-group:last-child {
    margin-bottom: 0 !important;
}

.wod.dialog .form-group label,
form.wod-effect-manager .form-group label,
form.wod-roll-dialog .form-group label,
.wod.roll-dialog label,
.wod.roll-dialog.Technocrat label,
form.wod-effect-manager label,
form.wod-roll-dialog label {
    display: block !important;
    font-weight: 700 !important;
    font-size: 0.7em !important;
    color: #444 !important;
    margin-bottom: 6px !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
}

/* ====================
   INPUTS & SELECTS (Modern Style)
   ==================== */

.wod.dialog input[type="text"],
.wod.dialog input[type="number"],
.wod.dialog select,
.wod.dialog textarea,
form.wod-effect-manager input[type="text"],
form.wod-effect-manager input[type="number"],
form.wod-effect-manager select,
form.wod-effect-manager textarea,
form.wod-effect-manager select.condition-scope-select,
form.wod-effect-manager select.condition-target-select,
form.wod-roll-dialog input[type="text"],
form.wod-roll-dialog input[type="number"],
form.wod-roll-dialog select,
.wod.roll-dialog input[type="text"],
.wod.roll-dialog input[type="number"],
.wod.roll-dialog select,
.wod.roll-dialog.Technocrat input[type="text"],
.wod.roll-dialog.Technocrat input[type="number"],
.wod.roll-dialog.Technocrat select {
    background: #fafafa !important;
    border: 1px solid #d0d0d0 !important;
    border-radius: 4px !important;
    padding: 8px 10px !important;
    font-size: 0.85em !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    transition: all 0.2s ease !important;
    color: #333 !important;
    font-family: inherit !important;
    height: auto !important;
    min-height: 36px !important;
    line-height: 1.5 !important;
    box-sizing: border-box !important;
}

/* Ensure select dropdowns display properly */
form.wod-effect-manager select.condition-scope-select,
form.wod-effect-manager select.condition-target-select {
    appearance: auto !important;
    -webkit-appearance: menulist !important;
    -moz-appearance: menulist !important;
}

/* Condition Target Checkboxes Container */
.wod.dialog.effect-manager form.wod-effect-manager .condition-targets-checkboxes,
form.wod-effect-manager .condition-targets-checkboxes {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)) !important;
    gap: 8px !important;
    padding: 10px !important;
    background: #f9f9f9 !important;
    border: 1px solid #e0e0e0 !important;
    border-radius: 4px !important;
    max-height: 250px !important;
    overflow-y: auto !important;
}

/* Individual Checkbox Labels */
.wod.dialog.effect-manager form.wod-effect-manager .condition-target-checkbox,
form.wod-effect-manager .condition-target-checkbox {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    padding: 6px 8px !important;
    background: white !important;
    border: 1px solid #d0d0d0 !important;
    border-radius: 4px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    font-size: 0.85em !important;
    margin: 0 !important;
}

/* Hover state */
.wod.dialog.effect-manager form.wod-effect-manager .condition-target-checkbox:hover,
form.wod-effect-manager .condition-target-checkbox:hover {
    background: rgba(70, 130, 180, 0.1) !important;
    border-color: var(--wod-primary, #4682B4) !important;
}

/* Checkboxes inside labels */
.wod.dialog.effect-manager form.wod-effect-manager .condition-target-checkbox input[type="checkbox"],
form.wod-effect-manager .condition-target-checkbox input[type="checkbox"] {
    width: 16px !important;
    height: 16px !important;
    margin: 0 !important;
    cursor: pointer !important;
    flex-shrink: 0 !important;
}

/* Checkbox text spans */
.wod.dialog.effect-manager form.wod-effect-manager .condition-target-checkbox span,
form.wod-effect-manager .condition-target-checkbox span {
    flex: 1 !important;
    user-select: none !important;
}

/* Checked state */
.wod.dialog.effect-manager form.wod-effect-manager .condition-target-checkbox:has(input:checked),
form.wod-effect-manager .condition-target-checkbox:has(input:checked) {
    background: var(--wod-primary, #4682B4) !important;
    color: white !important;
    border-color: var(--wod-primary-dark, #3a5a8a) !important;
    font-weight: 600 !important;
}

/* Textarea styling */
.wod.dialog.effect-manager form.wod-effect-manager textarea,
form.wod-effect-manager textarea,
form.wod-effect-manager textarea[name="sideEffectDescription"],
.side-effect-description textarea {
    line-height: 1.5 !important;
    resize: vertical !important;
    min-height: 60px !important;
    padding: 10px !important;
    font-family: inherit !important;
    background: white !important;
    border: 1px solid #d0d0d0 !important;
    border-radius: 4px !important;
    width: 100% !important;
}

.wod.dialog.effect-manager form.wod-effect-manager textarea:focus,
form.wod-effect-manager textarea:focus {
    border-color: var(--wod-primary, #4682B4) !important;
    outline: none !important;
    background: white !important;
    box-shadow: 0 0 0 3px rgba(70, 130, 180, 0.1) !important;
}

.wod.dialog input[type="text"]:focus,
.wod.dialog input[type="number"]:focus,
.wod.dialog select:focus,
.wod.dialog textarea:focus,
form.wod-effect-manager input[type="text"]:focus,
form.wod-effect-manager input[type="number"]:focus,
form.wod-effect-manager select:focus,
form.wod-effect-manager textarea:focus,
form.wod-roll-dialog input[type="text"]:focus,
form.wod-roll-dialog input[type="number"]:focus,
form.wod-roll-dialog select:focus {
    border-color: var(--wod-primary, #4682B4) !important;
    outline: none !important;
    background: white !important;
    box-shadow: 0 0 0 3px rgba(70, 130, 180, 0.1) !important;
}

/* ====================
   CHECKBOXES
   ==================== */

.wod.dialog .checkbox-group,
form.wod-effect-manager .checkbox-group,
form.wod-roll-dialog .checkbox-group {
    display: flex !important;
    align-items: flex-start !important;
    gap: 8px !important;
    margin-bottom: 8px !important;
}

.wod.dialog .checkbox-group label,
form.wod-effect-manager .checkbox-group label,
form.wod-roll-dialog .checkbox-group label {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    font-weight: 500 !important;
    text-transform: none !important;
    cursor: pointer !important;
    font-size: 0.85em !important;
}

.wod.dialog input[type="checkbox"],
form.wod-effect-manager input[type="checkbox"],
form.wod-roll-dialog input[type="checkbox"],
.wod.roll-dialog input[type="checkbox"] {
    width: auto !important;
    cursor: pointer !important;
    margin: 0 !important;
}

/* ====================
   SMALL HELPER TEXT
   ==================== */

.wod.dialog small,
form.wod-effect-manager small,
form.wod-roll-dialog small,
form.wod-roll-dialog .approval-note {
    display: block !important;
    font-size: 0.7em !important;
    color: #777 !important;
    margin-top: 6px !important;
    font-style: italic !important;
    line-height: 1.4 !important;
}

/* Specific spacing for condition scope help text */
form.wod-effect-manager .form-group small {
    margin-top: 8px !important;
    padding-left: 2px !important;
}

/* ====================
   MODIFIERS LIST (Card Style)
   ==================== */

form.wod-effect-manager .modifiers-list,
form.wod-roll-dialog .modifier-list,
.wod.roll-dialog .modifier-list,
.wod.roll-dialog.Technocrat .modifier-list {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    margin-bottom: 12px !important;
}

/* Modifier Pills/Chips - Compact Modern Style - ONLY IN DIALOG */
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row,
form.wod-effect-manager .effect-modifiers .modifier-row,
form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row {
    background: linear-gradient(135deg, #f0f4f8 0%, #e8eef5 100%) !important;
    border: 2px solid var(--wod-primary, #4682B4) !important;
    border-radius: 20px !important;
    padding: 6px 10px 6px 12px !important;
    display: inline-flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 8px !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08) !important;
    transition: all 0.2s ease !important;
    width: auto !important;
    max-width: fit-content !important;
    box-sizing: border-box !important;
    margin: 4px !important;
    vertical-align: middle !important;
}

/* Make modifier list wrap pills - ONLY IN DIALOG */
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifiers-list,
form.wod-effect-manager .effect-modifiers .modifiers-list {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 0 !important;
    align-items: center !important;
    justify-content: center !important;
    margin-bottom: 12px !important;
    text-align: center !important;
}

.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row:hover,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row:hover,
form.wod-effect-manager .effect-modifiers .modifier-row:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 3px 10px rgba(70, 130, 180, 0.25) !important;
    border-color: var(--wod-primary-dark, #2F4F6F) !important;
}

/* Modifier Pills - Compact Inputs - ONLY IN EFFECT MANAGER DIALOG */
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row select.modifier-type,
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row input.modifier-value,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row select,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row input[type="number"],
form.wod-effect-manager .effect-modifiers .modifier-type,
form.wod-effect-manager .effect-modifiers .modifier-value,
form.wod-effect-manager .effect-modifiers .modifier-row select,
form.wod-effect-manager .effect-modifiers .modifier-row input[type="number"],
form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row select,
form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row input {
    flex: 0 0 auto !important;
    min-width: 0 !important;
    max-width: none !important;
    background: rgba(255, 255, 255, 0.7) !important;
    border: 1px solid rgba(70, 130, 180, 0.3) !important;
    border-radius: 12px !important;
    padding: 3px 8px !important;
    font-size: 0.75em !important;
    height: 26px !important;
    line-height: 1.4 !important;
    box-sizing: border-box !important;
    vertical-align: middle !important;
    color: #333 !important;
    font-weight: 500 !important;
}

/* Specific widths for pills - ONLY IN EFFECT MANAGER DIALOG */
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row select.modifier-type,
form.wod-effect-manager .effect-modifiers .modifier-row select.modifier-type {
    width: 110px !important;
    margin-right: 4px !important;
    border-right: 2px solid rgba(70, 130, 180, 0.2) !important;
    border-radius: 12px 8px 8px 12px !important;
}

.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row input.modifier-value,
form.wod-effect-manager .effect-modifiers .modifier-row input.modifier-value {
    width: 55px !important;
    text-align: center !important;
    font-weight: 600 !important;
    border-radius: 8px 12px 12px 8px !important;
}

/* Focus states for pill inputs - ONLY IN DIALOGS */
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row select:focus,
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row input:focus,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row select:focus,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row input:focus,
form.wod-effect-manager .effect-modifiers .modifier-row select:focus,
form.wod-effect-manager .effect-modifiers .modifier-row input:focus,
form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row select:focus,
form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row input:focus {
    border-color: var(--wod-primary, #4682B4) !important;
    outline: none !important;
    background: white !important;
    box-shadow: 0 0 0 2px rgba(70, 130, 180, 0.2) !important;
}

/* Remove modifier button - Pill Style - ONLY IN DIALOGS */
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row button.remove-modifier-row,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row button,
form.wod-effect-manager .effect-modifiers .remove-modifier-row,
form.wod-effect-manager .effect-modifiers .modifiers-list .modifier-row button,
form.wod-roll-dialog .remove-modifier,
.wod.roll-dialog .remove-modifier,
.wod.roll-dialog.Technocrat .remove-modifier {
    background: rgba(220, 53, 69, 0.1) !important;
    color: #dc3545 !important;
    border: none !important;
    padding: 0 !important;
    cursor: pointer !important;
    border-radius: 50% !important;
    transition: all 0.2s ease !important;
    font-weight: bold !important;
    font-size: 0.75em !important;
    flex: 0 0 auto !important;
    width: 20px !important;
    height: 20px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-width: 20px !important;
    max-width: 20px !important;
    margin-left: 2px !important;
}

.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row button.remove-modifier-row:hover,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row button:hover,
form.wod-effect-manager .effect-modifiers .remove-modifier-row:hover,
form.wod-roll-dialog .remove-modifier:hover,
.wod.roll-dialog .remove-modifier:hover {
    background: rgba(220, 53, 69, 0.25) !important;
    transform: scale(1.15) !important;
    color: #c82333 !important;
}

/* Icon inside remove button - ONLY IN DIALOGS */
.wod.dialog.effect-manager form.wod-effect-manager .modifiers-list .modifier-row button.remove-modifier-row i,
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .modifier-row button i,
form.wod-effect-manager .effect-modifiers .remove-modifier-row i,
form.wod-roll-dialog .remove-modifier i,
.wod.roll-dialog .remove-modifier i {
    font-size: 0.7em !important;
    line-height: 1 !important;
    margin: 0 !important;
    padding: 0 !important;
    width: auto !important;
    height: auto !important;
}

/* ====================
   ADD BUTTONS (Green Circular Standard) - ENFORCED
   ==================== */

/* Ultra-specific selectors to ensure circular green button */
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .add-modifier-row,
form.wod-effect-manager .effect-modifiers .add-modifier-row,
form.wod-effect-manager button.add-modifier-row,
.wod.dialog form.wod-effect-manager .add-modifier-row,
form.wod-roll-dialog .add-modifier,
.wod.dialog .add-modifier,
.wod.dialog.roll-dialog .add-modifier,
.wod.dialog.roll-dialog.Technocrat button.add-modifier,
button.add-modifier-row,
button.add-modifier {
    background: linear-gradient(135deg, #28a745 0%, #218838 100%) !important;
    background-color: #28a745 !important;
    color: white !important;
    border: none !important;
    border-radius: 50% !important;
    width: 32px !important;
    height: 32px !important;
    min-width: 32px !important;
    min-height: 32px !important;
    max-width: 32px !important;
    max-height: 32px !important;
    padding: 0 !important;
    font-size: 1.1em !important;
    font-weight: bold !important;
    line-height: 1 !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-shadow: 0 2px 5px rgba(40, 167, 69, 0.3) !important;
    margin: 8px auto 0 auto !important;
    vertical-align: middle !important;
}

/* Icon inside add button */
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .add-modifier-row i,
form.wod-effect-manager .effect-modifiers .add-modifier-row i,
form.wod-effect-manager button.add-modifier-row i,
form.wod-effect-manager .add-modifier-row i,
form.wod-roll-dialog .add-modifier i,
.wod.dialog .add-modifier i,
button.add-modifier-row i,
button.add-modifier i {
    margin: 0 !important;
    line-height: 1 !important;
    padding: 0 !important;
    display: block !important;
}

/* Hover state */
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers .add-modifier-row:hover,
form.wod-effect-manager .effect-modifiers .add-modifier-row:hover,
form.wod-effect-manager button.add-modifier-row:hover,
form.wod-effect-manager .add-modifier-row:hover,
form.wod-roll-dialog .add-modifier:hover,
.wod.dialog .add-modifier:hover,
.wod.dialog.roll-dialog.Technocrat button.add-modifier:hover,
button.add-modifier-row:hover,
button.add-modifier:hover {
    transform: scale(1.15) !important;
    box-shadow: 0 3px 10px rgba(40, 167, 69, 0.4) !important;
    background: linear-gradient(135deg, #218838 0%, #1e7e34 100%) !important;
    background-color: #218838 !important;
}

/* Center the add modifier button */
.wod.dialog.effect-manager form.wod-effect-manager .effect-modifiers,
form.wod-effect-manager .effect-modifiers {
    text-align: center !important;
}

/* ====================
   FOUNDRY CONFIRMATION DIALOGS (Dialog.confirm)
   ==================== */

/* Ultra-specific selectors for Foundry's confirmation dialogs */
.app.window-app.dialog,
.dialog,
div.dialog,
div.app.dialog {
    background: transparent !important;
}

/* Header styling */
.app.window-app.dialog .window-header,
.dialog .window-header,
div.dialog .window-header,
div.app.dialog .window-header,
.app.window-app.dialog header.window-header,
.dialog header.window-header {
    background: linear-gradient(135deg, #4682B4 0%, #2F4F6F 100%) !important;
    color: white !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-weight: 700 !important;
    border-radius: 6px 6px 0 0 !important;
    padding: 12px 16px !important;
    border-bottom: none !important;
}

/* Window content (main body) */
.app.window-app.dialog .window-content,
.dialog .window-content,
div.dialog .window-content,
div.app.dialog .window-content,
.app.window-app.dialog section.window-content,
.dialog section.window-content {
    background: white !important;
    padding: 20px !important;
    font-size: 0.95em !important;
    line-height: 1.6 !important;
    color: #333 !important;
    border: none !important;
}

/* Dialog buttons container */
.app.window-app.dialog .dialog-buttons,
.dialog .dialog-buttons,
div.dialog .dialog-buttons,
div.app.dialog .dialog-buttons,
.app.window-app.dialog .window-content .dialog-buttons,
.dialog .window-content .dialog-buttons {
    padding: 12px 20px 20px 20px !important;
    display: flex !important;
    gap: 12px !important;
    justify-content: center !important;
    background: white !important;
    border-top: none !important;
    margin: 0 !important;
}

/* All buttons in dialog */
.app.window-app.dialog .dialog-buttons button,
.dialog .dialog-buttons button,
div.dialog .dialog-buttons button,
div.app.dialog .dialog-buttons button {
    flex: 1 !important;
    max-width: 200px !important;
    min-width: 150px !important;
    padding: 12px 24px !important;
    font-size: 0.9em !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    border: none !important;
    border-radius: 6px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15) !important;
}

/* Exclude header buttons (close, minimize, etc) - Don't override header buttons */
.app.window-app.dialog .window-header button,
.dialog .window-header button,
.app.window-app.dialog .window-header a,
.dialog .window-header a {
    flex: 0 !important;
    max-width: none !important;
    min-width: 0 !important;
    padding: 0 !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    text-transform: none !important;
    letter-spacing: normal !important;
    font-size: inherit !important;
    font-weight: inherit !important;
    border-radius: 0 !important;
    transition: none !important;
}

.app.window-app.dialog .window-header button i,
.dialog .window-header button i,
.app.window-app.dialog .window-header a i,
.dialog .window-header a i {
    margin: 0 !important;
    padding: 0 !important;
    font-size: inherit !important;
}

/* YES button (Green) */
.app.window-app.dialog .dialog-buttons button.yes,
.dialog .dialog-buttons button.yes,
.dialog button.yes,
.app.window-app.dialog button.yes,
.app.window-app.dialog .dialog-buttons button[data-button="yes"],
.dialog .dialog-buttons button[data-button="yes"],
.dialog button[data-button="yes"] {
    background: linear-gradient(135deg, #28a745 0%, #218838 100%) !important;
    color: white !important;
}

.app.window-app.dialog .dialog-buttons button.yes:hover,
.dialog .dialog-buttons button.yes:hover,
.dialog button.yes:hover,
.app.window-app.dialog button.yes:hover {
    background: linear-gradient(135deg, #218838 0%, #1e7e34 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4) !important;
}

/* NO button (Red) */
.app.window-app.dialog .dialog-buttons button.no,
.dialog .dialog-buttons button.no,
.dialog button.no,
.app.window-app.dialog button.no,
.app.window-app.dialog .dialog-buttons button[data-button="no"],
.dialog .dialog-buttons button[data-button="no"],
.dialog button[data-button="no"] {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
    color: white !important;
}

.app.window-app.dialog .dialog-buttons button.no:hover,
.dialog .dialog-buttons button.no:hover,
.dialog button.no:hover,
.app.window-app.dialog button.no:hover {
    background: linear-gradient(135deg, #c82333 0%, #bd2130 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4) !important;
}

/* Strong text in content */
.dialog .window-content strong,
.app.window-app.dialog .window-content strong {
    color: #4682B4 !important;
    font-weight: 700 !important;
}

/* Paragraphs */
.dialog .window-content p,
.app.window-app.dialog .window-content p {
    margin: 0 0 10px 0 !important;
    color: #333 !important;
}

.dialog .window-content p:last-child,
.app.window-app.dialog .window-content p:last-child {
    margin-bottom: 0 !important;
}

/* ====================
   DIALOG BUTTONS (Bottom)
   ==================== */

.wod.dialog .dialog-buttons,
form.wod-effect-manager .dialog-buttons,
form.wod-roll-dialog .dialog-buttons,
.wod.roll-dialog .dialog-buttons,
.wod.roll-dialog.Technocrat .dialog-buttons,
.wod.dialog.effect-manager .dialog-buttons,
.wod.dialog.roll-dialog .dialog-buttons {
    display: flex !important;
    justify-content: center !important;
    gap: 10px !important;
    margin-top: 0 !important;
    padding-top: 15px !important;
    border-top: 2px solid #e0e0e0 !important;
    background: transparent !important;
    box-shadow: none !important;
}

.wod.dialog .dialog-buttons button,
form.wod-effect-manager .dialog-buttons button,
form.wod-roll-dialog .dialog-buttons button,
.wod.roll-dialog .dialog-buttons button,
.wod.roll-dialog.Technocrat .dialog-buttons button,
.wod.dialog.effect-manager .dialog-buttons button,
.wod.dialog.roll-dialog .dialog-buttons button,
form.wod-effect-manager button.save-effect,
form.wod-effect-manager button.cancel-effect,
form.wod-roll-dialog button.roll-button,
form.wod-roll-dialog button.cancel-button {
    padding: 10px 20px !important;
    border-radius: 6px !important;
    font-size: 0.9em !important;
    font-weight: 600 !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    border: none !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 6px !important;
    min-width: 120px !important;
    line-height: 1.2 !important;
}

/* Primary action button (Roll, Save) */
form.wod-roll-dialog button.roll-button,
form.wod-effect-manager button.save-effect,
.wod.dialog.roll-dialog button.roll-button,
.wod.dialog.roll-dialog.Technocrat button.roll-button,
.wod.dialog.effect-manager button.save-effect,
button.save-effect,
button.roll-button {
    background: linear-gradient(135deg, var(--wod-primary, #4682B4) 0%, var(--wod-primary-dark, #2F4F6F) 100%) !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
}

form.wod-roll-dialog button.roll-button:hover,
form.wod-effect-manager button.save-effect:hover,
.wod.dialog.roll-dialog button.roll-button:hover,
button.save-effect:hover,
button.roll-button:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25) !important;
}

/* Cancel button */
form.wod-roll-dialog button.cancel-button,
form.wod-effect-manager button.cancel-effect,
.wod.dialog.roll-dialog button.cancel-button,
.wod.dialog.roll-dialog.Technocrat button.cancel-button,
.wod.dialog.effect-manager button.cancel-effect,
button.cancel-button,
button.cancel-effect {
    background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%) !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
}

form.wod-roll-dialog button.cancel-button:hover,
form.wod-effect-manager button.cancel-effect:hover,
.wod.dialog.roll-dialog button.cancel-button:hover,
button.cancel-button:hover,
button.cancel-effect:hover {
    background: linear-gradient(135deg, #5a6268 0%, #495057 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25) !important;
}

/* ====================
   ROLL DIALOG SPECIFIC
   ==================== */

form.wod-roll-dialog .pool-breakdown,
.wod.roll-dialog .pool-breakdown {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 6px !important;
    margin: 10px 0 !important;
}

form.wod-roll-dialog .trait-chip,
.wod.roll-dialog .trait-chip,
.wod.roll-dialog.Technocrat .trait-chip {
    background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%) !important;
    border: 1px solid #d0d0d0 !important;
    border-radius: 14px !important;
    padding: 5px 12px !important;
    font-size: 0.75em !important;
    font-weight: 600 !important;
    color: #333 !important;
    margin: 0 !important;
    display: inline-block !important;
}

form.wod-roll-dialog .total-pool,
.wod.roll-dialog .total-pool {
    font-size: 0.9em !important;
    color: #333 !important;
    margin-top: 10px !important;
    padding-top: 10px !important;
    border-top: 1px solid #e0e0e0 !important;
    font-weight: 500 !important;
}

form.wod-roll-dialog .total-pool strong,
.wod.roll-dialog .total-pool strong {
    color: var(--wod-primary, #4682B4) !important;
    font-size: 1.3em !important;
    font-weight: 700 !important;
}

/* ====================
   EFFECT ITEMS IN ROLL DIALOG
   ==================== */

form.wod-roll-dialog .effect-item,
.wod.dialog.roll-dialog .effect-item {
    background: #fafafa !important;
    border-left: 3px solid var(--wod-primary, #4682B4) !important;
    border-radius: 4px !important;
    padding: 8px 12px !important;
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    margin-bottom: 6px !important;
    font-size: 0.8em !important;
    border: 1px solid #e0e0e0 !important;
    border-left-width: 3px !important;
    transition: all 0.2s ease !important;
}

form.wod-roll-dialog .effect-item.mandatory,
.wod.dialog.roll-dialog .effect-item.mandatory {
    border-left-color: #ffc107 !important;
    background: rgba(255, 193, 7, 0.08) !important;
}

form.wod-roll-dialog .effect-item.optional,
.wod.dialog.roll-dialog .effect-item.optional {
    border-left-color: #28a745 !important;
    background: rgba(40, 167, 69, 0.08) !important;
}

form.wod-roll-dialog .effect-item:hover,
.wod.dialog.roll-dialog .effect-item:hover {
    background: #f0f0f0 !important;
    transform: translateX(2px) !important;
}

form.wod-roll-dialog .effect-name,
.wod.dialog.roll-dialog .effect-name {
    flex: 1 !important;
    font-weight: 500 !important;
    color: #333 !important;
}

form.wod-roll-dialog .effect-modifier,
.wod.dialog.roll-dialog .effect-modifier {
    font-weight: 700 !important;
    padding: 3px 8px !important;
    border-radius: 3px !important;
    font-size: 0.95em !important;
}

form.wod-roll-dialog .effect-modifier.positive {
    background: #d4edda !important;
    color: #155724 !important;
}

form.wod-roll-dialog .effect-modifier.negative {
    background: #f8d7da !important;
    color: #721c24 !important;
}

form.wod-roll-dialog .effects-category,
.wod.dialog.roll-dialog .effects-category {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    font-weight: 600 !important;
    font-size: 0.7em !important;
    color: #666 !important;
    text-transform: uppercase !important;
    margin-bottom: 8px !important;
    letter-spacing: 0.5px !important;
}

/* ====================
   READONLY/DISABLED INPUTS
   ==================== */

.wod.dialog input[readonly],
.wod.dialog input[disabled],
form.wod-effect-manager input[readonly],
form.wod-effect-manager input[disabled] {
    background: #e8e8e8 !important;
    color: #666 !important;
    cursor: not-allowed !important;
    opacity: 0.75 !important;
    border-color: #d0d0d0 !important;
}

/* ====================
   RESPONSIVE ADJUSTMENTS
   ==================== */

@media (max-width: 600px) {
    .wod.dialog .dialog-buttons,
    form.wod-effect-manager .dialog-buttons,
    form.wod-roll-dialog .dialog-buttons {
        flex-direction: column !important;
    }
    
    .wod.dialog .dialog-buttons button,
    form.wod-effect-manager .dialog-buttons button,
    form.wod-roll-dialog .dialog-buttons button {
        width: 100% !important;
    }
}

/* ====================
   ST APPROVAL DIALOG
   ==================== */

.wod.dialog.st-approval .window-content {
    background: #f8f8f8 !important;
    padding: 12px !important;
}

form.st-approval-dialog {
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
}

form.st-approval-dialog .dialog-content {
    background: #ffffff !important;
    border-radius: 6px !important;
    padding: 16px !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

form.st-approval-dialog h2 {
    background: linear-gradient(135deg, var(--wod-primary, #3498DB) 0%, var(--wod-secondary, #2980B9) 100%) !important;
    color: white !important;
    text-transform: uppercase !important;
    font-size: 0.9em !important;
    font-weight: bold !important;
    letter-spacing: 0.5px !important;
    padding: 10px 16px !important;
    margin: -16px -16px 12px -16px !important;
    border-radius: 6px 6px 0 0 !important;
    text-align: center !important;
}

form.st-approval-dialog .request-info {
    margin: 0 0 16px 0 !important;
    padding: 12px !important;
    background: #f0f8ff !important;
    border-left: 4px solid var(--wod-primary, #3498DB) !important;
    border-radius: 4px !important;
    font-size: 0.95em !important;
}

form.st-approval-dialog .effects-list {
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
    margin-bottom: 16px !important;
    max-height: 300px !important;
    overflow-y: auto !important;
}

form.st-approval-dialog .effect-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    padding: 12px !important;
    background: #f8f8f8 !important;
    border-radius: 6px !important;
    border-left: 4px solid var(--wod-primary, #3498DB) !important;
}

form.st-approval-dialog .effect-icon {
    width: 40px !important;
    height: 40px !important;
    border-radius: 4px !important;
    object-fit: contain !important;
    background: linear-gradient(135deg, #5a6a7a 0%, #4a5a6a 100%) !important;
    padding: 4px !important;
    border: 2px solid #ddd !important;
}

form.st-approval-dialog .effect-details {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
}

form.st-approval-dialog .effect-details strong {
    font-size: 1em !important;
    color: #333 !important;
}

form.st-approval-dialog .effect-modifiers {
    font-size: 0.85em !important;
    color: #666 !important;
    font-style: italic !important;
}

form.st-approval-dialog .dialog-buttons {
    display: flex !important;
    gap: 10px !important;
    justify-content: flex-end !important;
    margin-top: 8px !important;
}

form.st-approval-dialog .approve-button {
    background: linear-gradient(135deg, #2ECC71 0%, #27AE60 100%) !important;
    color: white !important;
    border: none !important;
    padding: 10px 20px !important;
    border-radius: 6px !important;
    font-weight: bold !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
}

form.st-approval-dialog .approve-button:hover {
    background: linear-gradient(135deg, #27AE60 0%, #229954 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 8px rgba(46, 204, 113, 0.3) !important;
}

form.st-approval-dialog .deny-button {
    background: linear-gradient(135deg, #E74C3C 0%, #C0392B 100%) !important;
    color: white !important;
    border: none !important;
    padding: 10px 20px !important;
    border-radius: 6px !important;
    font-weight: bold !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
}

form.st-approval-dialog .deny-button:hover {
    background: linear-gradient(135deg, #C0392B 0%, #A93226 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3) !important;
}
