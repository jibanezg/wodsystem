/**
 * ==============================================
 * FOUNDRY DIALOG OVERRIDE - NUCLEAR OPTION
 * Forces all Foundry confirmation dialogs to use our styling
 * Excludes document creation dialogs to prevent breaking form elements on iOS
 * ==============================================
 */

/* CRITICAL iOS FIX: Don't override form layouts in document creation dialogs */
.window-app:has(form.simple-document-sheet),
.window-app:has(form[autocomplete="off"]) {
    /* Let Foundry handle these dialogs natively */
}

.window-app:has(form.simple-document-sheet) *,
.window-app:has(form[autocomplete="off"]) * {
    /* Prevent our overrides from breaking create dialogs */
    max-width: none !important;
}

/* Target ALL dialog windows EXCEPT create-actor */
.app.dialog:not(.create-actor),
.window-app.dialog:not(.create-actor),
div.dialog.window-app:not(.create-actor),
.app.window-app.dialog:not(.create-actor) {
    background: transparent !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
    border: 2px solid #4682B4 !important;
    border-radius: 8px !important;
}

/* HEADER - Force blue gradient */
.app.dialog .window-header,
.window-app.dialog .window-header,
.app.dialog header,
.window-app.dialog header,
div.dialog header.window-header,
.dialog header.window-header {
    background: linear-gradient(135deg, #4682B4 0%, #2F4F6F 100%) !important;
    background-color: #4682B4 !important;
    color: white !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-weight: 700 !important;
    border-radius: 6px 6px 0 0 !important;
    padding: 12px 16px !important;
    border-bottom: none !important;
    border: none !important;
}

.app.dialog .window-header h4,
.window-app.dialog .window-header h4,
.dialog header h4,
.dialog .window-header .window-title,
.app.dialog .window-title {
    color: white !important;
    text-transform: uppercase !important;
    margin: 0 !important;
}

/* CONTENT - Force white background */
.app.dialog .window-content,
.window-app.dialog .window-content,
.app.dialog section.window-content,
.window-app.dialog section.window-content,
div.dialog .window-content,
.dialog section.window-content {
    background: white !important;
    background-color: white !important;
    padding: 20px !important;
    font-size: 0.95em !important;
    line-height: 1.6 !important;
    color: #333 !important;
    border: none !important;
    overflow: visible !important;
    min-height: auto !important;
    height: auto !important;
}

/* Text in content */
.app.dialog .window-content p,
.window-app.dialog .window-content p,
.dialog .window-content p {
    color: #333 !important;
    margin: 0 0 10px 0 !important;
}

.app.dialog .window-content strong,
.window-app.dialog .window-content strong,
.dialog .window-content strong {
    color: #4682B4 !important;
    font-weight: 700 !important;
}

/* BUTTONS CONTAINER */
.app.dialog .dialog-buttons,
.window-app.dialog .dialog-buttons,
div.dialog .dialog-buttons,
.dialog .window-content .dialog-buttons,
.app.dialog .window-content footer,
.dialog footer {
    padding: 12px 20px 20px 20px !important;
    display: flex !important;
    gap: 12px !important;
    justify-content: center !important;
    background: white !important;
    background-color: white !important;
    border-top: none !important;
    margin: 0 !important;
}

/* ALL BUTTONS - Base styling (only in dialog-buttons container) */
.app.dialog .dialog-buttons button,
.window-app.dialog .dialog-buttons button,
div.dialog .dialog-buttons button {
    flex: 1 !important;
    max-width: 200px !important;
    min-width: 150px !important;
    padding: 12px 24px !important;
    font-size: 0.9em !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    border: none !important;
    border-radius: 6px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15) !important;
}

/* Exclude header buttons (close, minimize, etc) - Don't override header buttons */
.window-app.dialog .window-header button,
.dialog .window-header button,
.window-app.dialog .window-header a {
    flex: 0 !important;
    max-width: none !important;
    min-width: 0 !important;
    padding: 0 !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    text-transform: none !important;
    letter-spacing: normal !important;
    font-size: inherit !important;
    font-weight: inherit !important;
    border-radius: 0 !important;
    transition: none !important;
}

.window-app.dialog .window-header button i,
.dialog .window-header button i,
.window-app.dialog .window-header a i {
    margin: 0 !important;
    padding: 0 !important;
    font-size: inherit !important;
}

/* YES BUTTON - GREEN */
.app.dialog button.yes,
.window-app.dialog button.yes,
.dialog button.yes,
.app.dialog .dialog-buttons button.yes,
.window-app.dialog .dialog-buttons button.yes,
.dialog .dialog-buttons button:first-child,
.app.dialog button[data-button="yes"],
.dialog button[data-button="yes"] {
    background: linear-gradient(135deg, #28a745 0%, #218838 100%) !important;
    background-color: #28a745 !important;
    color: white !important;
}

.app.dialog button.yes:hover,
.window-app.dialog button.yes:hover,
.dialog button.yes:hover,
.dialog .dialog-buttons button:first-child:hover {
    background: linear-gradient(135deg, #218838 0%, #1e7e34 100%) !important;
    background-color: #218838 !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4) !important;
}

/* NO BUTTON - RED */
.app.dialog button.no,
.window-app.dialog button.no,
.dialog button.no,
.app.dialog .dialog-buttons button.no,
.window-app.dialog .dialog-buttons button.no,
.dialog .dialog-buttons button:last-child,
.app.dialog button[data-button="no"],
.dialog button[data-button="no"] {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
    background-color: #dc3545 !important;
    color: white !important;
}

.app.dialog button.no:hover,
.window-app.dialog button.no:hover,
.dialog button.no:hover,
.dialog .dialog-buttons button:last-child:hover {
    background: linear-gradient(135deg, #c82333 0%, #bd2130 100%) !important;
    background-color: #c82333 !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4) !important;
}

/* Icons in buttons (exclude header buttons) */
.app.dialog .dialog-buttons button i,
.window-app.dialog .dialog-buttons button i,
.dialog .dialog-buttons button i,
.app.dialog .window-content button i,
.window-app.dialog .window-content button i,
.dialog .window-content button i {
    margin-right: 6px !important;
    color: inherit !important;
}

/* FORM ELEMENTS - iOS/Safari compatibility fixes */
.app.dialog form,
.window-app.dialog form,
.dialog form {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow: visible !important;
}

.app.dialog .form-group,
.window-app.dialog .form-group,
.dialog .form-group {
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
    width: 100% !important;
    max-width: 100% !important;
    min-height: auto !important;
    overflow: visible !important;
    position: relative !important;
    z-index: 1 !important;
}

.app.dialog select,
.window-app.dialog select,
.dialog select,
.app.dialog input[type="text"],
.window-app.dialog input[type="text"],
.dialog input[type="text"] {
    display: block !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 10px !important;
    border: 1px solid #ccc !important;
    border-radius: 4px !important;
    font-size: 16px !important;
    background: white !important;
    color: #333 !important;
    box-sizing: border-box !important;
    margin: 0 !important;
    position: relative !important;
    z-index: 2 !important;
    
    /* iOS-specific fixes */
    -webkit-appearance: none !important;
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
}

.app.dialog select,
.window-app.dialog select,
.dialog select {
    /* Restore native select appearance for iOS */
    -webkit-appearance: menulist !important;
    appearance: menulist !important;
    min-height: 44px !important;
    height: auto !important;
    line-height: normal !important;
    cursor: pointer !important;
    
    /* Ensure select is visible and clickable on iOS */
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
}

.app.dialog label,
.window-app.dialog label,
.dialog label {
    display: block !important;
    font-weight: 600 !important;
    color: #333 !important;
    margin-bottom: 4px !important;
    font-size: 14px !important;
    line-height: 1.4 !important;
}

/* iOS viewport meta fix - prevent zoom on focus */
@supports (-webkit-touch-callout: none) {
    .app.dialog input,
    .app.dialog select,
    .app.dialog textarea {
        font-size: 16px !important;
    }
}

