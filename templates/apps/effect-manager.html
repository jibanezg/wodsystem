<form class="wod-effect-manager">
    <div class="effect-header-section">
        <div class="form-group">
            <label>Effect Name</label>
            <input type="text" name="name" value="{{effect.name}}" placeholder="Status name..." />
        </div>
        
        <div class="form-group">
            <label>Icon Path</label>
            <input type="text" name="icon" value="{{effect.icon}}" placeholder="icons/svg/aura.svg" />
        </div>
    </div>
    
    <div class="effect-metadata-section">
        <div class="form-group">
            <label>Created By</label>
            <input type="text" value="{{#if isGM}}Storyteller{{else}}Player{{/if}}" readonly disabled style="opacity: 0.7; cursor: not-allowed;" />
            <input type="hidden" name="createdBy" value="{{effect.createdBy}}" />
        </div>
        
        {{#if isPlayerEffect}}
        <div class="form-group checkbox-group">
            <label>
                <input type="checkbox" name="hasSideEffect" {{#if effect.hasSideEffect}}checked{{/if}} />
                Has Side Effect
            </label>
        </div>
        
        <div class="form-group checkbox-group">
            <label>
                <input type="checkbox" name="sideEffectAuto" {{#if effect.sideEffectAuto}}checked{{/if}} />
                Auto-Apply Side Effect
            </label>
            <small>Check if the side effect should be automatically applied (usually negative)</small>
        </div>
        {{/if}}
        
        {{#if isGM}}
        <div class="form-group checkbox-group">
            <label>
                <input type="checkbox" name="mandatory" {{#if effect.mandatory}}checked{{/if}} />
                Mandatory (Auto-Applied)
            </label>
            <small>ST effects are auto-applied when mandatory</small>
        </div>
        {{/if}}
    </div>
    
    <div class="effect-conditions-section">
        <h3>When to Apply Effect</h3>
        
        <div class="form-group">
            <label>Condition Scope</label>
            <select name="conditionScope" class="condition-scope-select">
                {{#each conditionScopes}}
                <option value="{{this.value}}" {{#eq this.value ../effect.conditionScope}}selected{{/eq}}>{{this.label}}</option>
                {{/each}}
            </select>
            <small>Choose when this effect should be applied to rolls</small>
        </div>
        
        <div class="form-group condition-target-group" style="{{#if effect.hideConditionTarget}}display: none;{{/if}}">
            <label class="condition-target-label">Specific Target</label>
            <select name="conditionTarget" class="condition-target-select">
                <option value="">-- Select --</option>
                {{#each conditionTargets}}
                <option value="{{this.value}}" {{#eq this.value ../effect.conditionTarget}}selected{{/eq}}>{{this.label}}</option>
                {{/each}}
            </select>
            <small class="condition-target-help">Select which specific trait this effect applies to</small>
        </div>
    </div>
    
    <div class="effect-modifiers">
        <h3>Modifiers</h3>
        <p class="modifiers-help"><small>Use positive values (+2, +3) for bonuses, negative values (-2, -3) for penalties</small></p>
        <div class="modifiers-list">
            {{#each effect.changes}}
            <div class="modifier-row">
                <select class="modifier-type" name="modifiers.{{@index}}.key">
                    <option value="pool" {{#eq this.key "pool"}}selected{{/eq}}>Pool Dice</option>
                    <option value="difficulty" {{#eq this.key "difficulty"}}selected{{/eq}}>Difficulty</option>
                    <option value="autoSuccess" {{#eq this.key "autoSuccess"}}selected{{/eq}}>Auto Success</option>
                    <option value="autoFail" {{#eq this.key "autoFail"}}selected{{/eq}}>Auto Fail</option>
                </select>
                <input type="number" class="modifier-value" name="modifiers.{{@index}}.value" value="{{this.value}}" placeholder="+2 or -2" />
                <button type="button" class="remove-modifier-row"><i class="fas fa-times"></i></button>
            </div>
            {{/each}}
        </div>
        <button type="button" class="add-modifier-row"><i class="fas fa-plus"></i> Add Modifier</button>
    </div>
    
    <div class="dialog-buttons">
        <button type="button" class="save-effect">
            <i class="fas fa-save"></i> Save Effect
        </button>
        {{#if effect.id}}
        <button type="button" class="delete-effect" style="background: var(--wod-danger, #dc143c);">
            <i class="fas fa-trash"></i> Delete Effect
        </button>
        {{/if}}
        <button type="button" class="cancel-effect">Cancel</button>
    </div>
</form>

