<form class="wod-effect-manager">
    <!-- Basic Information Section -->
    <div class="effect-header-section">
        <h3><i class="fas fa-info-circle"></i> Basic Information</h3>
        
        <div class="form-group">
            <label>Effect Name</label>
            <input type="text" name="name" value="{{effect.name}}" placeholder="Status name..." />
        </div>
        
        <div class="form-group">
            <label>Icon Path <span class="help-text">(Optional)</span></label>
            <input type="text" name="icon" value="{{effect.icon}}" placeholder="icons/svg/aura.svg" />
            <p class="help-text">Leave empty to use default icon (icons/svg/aura.svg)</p>
        </div>
    </div>
    
    <!-- Metadata Section -->
    <div class="effect-metadata-section">
        <h3><i class="fas fa-user-tag"></i> Effect Type</h3>
        
        <div class="form-group">
            <label>Created By</label>
            <input type="text" value="{{#if isGM}}Storyteller{{else}}Player{{/if}}" readonly disabled />
            <input type="hidden" name="createdBy" value="{{effect.createdBy}}" />
        </div>
        
        
        {{#if isGM}}
        <div class="form-group checkbox-group">
            <label>
                <input type="checkbox" name="mandatory" {{#if effect.mandatory}}checked{{/if}} />
                Mandatory (Auto-Applied)
            </label>
            <small>ST effects are auto-applied when mandatory</small>
        </div>
        {{/if}}
    </div>
    
    <!-- Conditions Section -->
    <div class="effect-conditions-section">
        <h3><i class="fas fa-filter"></i> When to Apply Effect</h3>
        
        <div class="form-group">
            <label>Condition Scope</label>
            <select name="conditionScope" class="condition-scope-select">
                {{#each conditionScopes}}
                <option value="{{this.value}}" {{#eq this.value ../effect.conditionScope}}selected{{/eq}}>{{this.label}}</option>
                {{/each}}
            </select>
            <small>Choose when this effect should be applied to rolls</small>
        </div>
        
        <div class="form-group condition-target-group" style="{{#if effect.hideConditionTarget}}display: none;{{/if}}">
            <label class="condition-target-label">Specific Targets (select one or more)</label>
            <div class="condition-targets-checkboxes">
                {{#each conditionTargets}}
                <label class="condition-target-checkbox">
                    <input type="checkbox" name="conditionTargets" value="{{this.value}}" {{#if this.checked}}checked{{/if}} />
                    <span>{{this.label}}</span>
                </label>
                {{/each}}
            </div>
            <small class="condition-target-help">Select which specific traits this effect applies to (you can select multiple)</small>
        </div>
    </div>
    
    <!-- Modifiers Section -->
    <div class="effect-modifiers">
        <h3><i class="fas fa-sliders-h"></i> Modifiers</h3>
        <p class="modifiers-help"><small>Use positive values (+2, +3) for bonuses, negative values (-2, -3) for penalties</small></p>
        <div class="modifiers-list">
            {{#each effect.changes}}
            <div class="modifier-row">
                <select class="modifier-type" name="modifiers.{{@index}}.key">
                    <option value="pool" {{#eq this.key "pool"}}selected{{/eq}}>Pool Dice</option>
                    <option value="difficulty" {{#eq this.key "difficulty"}}selected{{/eq}}>Difficulty</option>
                    <option value="autoSuccess" {{#eq this.key "autoSuccess"}}selected{{/eq}}>Auto Success</option>
                    <option value="autoFail" {{#eq this.key "autoFail"}}selected{{/eq}}>Auto Fail</option>
                </select>
                <input type="number" class="modifier-value" name="modifiers.{{@index}}.value" value="{{this.value}}" placeholder="+2 or -2" />
                <button type="button" class="remove-modifier-row"><i class="fas fa-times"></i></button>
            </div>
            {{/each}}
        </div>
        <button type="button" class="add-modifier-row" title="Add Modifier"><i class="fas fa-plus"></i></button>
    </div>
    
    <!-- Action Buttons -->
    <div class="dialog-buttons">
        <button type="button" class="save-effect">
            <i class="fas fa-save"></i> Save Effect
        </button>
        <button type="button" class="cancel-effect">
            <i class="fas fa-times"></i> Cancel
        </button>
    </div>
</form>

