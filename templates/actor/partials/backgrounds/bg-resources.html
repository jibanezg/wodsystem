<!-- Resources Background Template -->
<div class="bg-template resources-template">
    <div class="template-field-row">
        <div class="template-field">
            <label>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevel'}}</label>
            <select name="system.backgroundsExpanded.{{index}}.templateData.incomeLevel" class="template-select">
                <option value="poor" {{#if (eq data.incomeLevel "poor")}}selected{{/if}}>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevelPoor'}}</option>
                <option value="middle" {{#if (eq data.incomeLevel "middle")}}selected{{/if}}>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevelMiddle'}}</option>
                <option value="comfortable" {{#if (eq data.incomeLevel "comfortable")}}selected{{/if}}>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevelComfortable'}}</option>
                <option value="wealthy" {{#if (eq data.incomeLevel "wealthy")}}selected{{/if}}>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevelWealthy'}}</option>
                <option value="rich" {{#if (eq data.incomeLevel "rich")}}selected{{/if}}>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevelRich'}}</option>
                <option value="ultra_rich" {{#if (eq data.incomeLevel "ultra_rich")}}selected{{/if}}>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.IncomeLevelUltraRich'}}</option>
            </select>
        </div>
        
        <div class="template-field">
            <label>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.LiquidCashAvailable'}}</label>
            <input type="text" 
                   name="system.backgroundsExpanded.{{index}}.templateData.liquidCash" 
                   value="{{data.liquidCash}}" 
                   placeholder="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.LiquidCashAvailablePlaceholder'}}" 
                   class="template-input" />
        </div>
    </div>
    
    <div class="template-field">
        <label>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.PropertiesOwned'}}</label>
        <div class="properties-list">
            {{#each data.properties as |property propIndex|}}
            <div class="property-entry">
                <div class="property-header">
                    <input type="text" 
                           name="system.backgroundsExpanded.{{../index}}.templateData.properties.{{propIndex}}.type" 
                           value="{{property.type}}" 
                           placeholder="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.PropertyType'}}" 
                           class="property-input" />
                    <a class="delete-property" data-bg-index="{{../index}}" data-prop-index="{{propIndex}}" title="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.RemoveProperty'}}">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
                <input type="text" 
                       name="system.backgroundsExpanded.{{../index}}.templateData.properties.{{propIndex}}.location" 
                       value="{{property.location}}" 
                       placeholder="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.PropertyLocation'}}" 
                       class="property-input" />
                <input type="text" 
                       name="system.backgroundsExpanded.{{../index}}.templateData.properties.{{propIndex}}.value" 
                       value="{{property.value}}" 
                       placeholder="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.EstimatedValue'}}" 
                       class="property-input" />
            </div>
            {{/each}}
        </div>
        {{#if isEditMode}}
        <button class="add-property" data-bg-index="{{index}}" type="button">+ {{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.AddProperty'}}</button>
        {{/if}}
    </div>
    
    <div class="template-field">
        <label>{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.AssetsInvestments'}}</label>
        <div class="assets-list">
            {{#each data.assets as |asset assetIndex|}}
            <div class="asset-entry">
                <div class="asset-header">
                    <input type="text" 
                           name="system.backgroundsExpanded.{{../index}}.templateData.assets.{{assetIndex}}.description" 
                           value="{{asset.description}}" 
                           placeholder="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.AssetDescription'}}" 
                           class="asset-input" />
                    <a class="delete-asset" data-bg-index="{{../index}}" data-asset-index="{{assetIndex}}" title="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.RemoveAsset'}}">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
                <input type="text" 
                       name="system.backgroundsExpanded.{{../index}}.templateData.assets.{{assetIndex}}.value" 
                       value="{{asset.value}}" 
                       placeholder="{{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.EstimatedValue'}}" 
                       class="asset-input" />
            </div>
            {{/each}}
        </div>
        {{#if isEditMode}}
        <button class="add-asset" data-bg-index="{{index}}" type="button">+ {{i18n 'WODSYSTEM.CharacterSheet.BackgroundsExpanded.Fields.AddAsset'}}</button>
        {{/if}}
    </div>
</div>
